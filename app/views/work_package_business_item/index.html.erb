<%= work_package_description_with_markup( @work_package ) %>

<div id="business-items">
	<%= list_item_count_sentence_with_actualisation( 'business item', @business_item_count, 'step', @work_package_business_items.size ) %>

	<%= content_tag( 'p', link_to( 'RSS', @rss_url, :class => 'rss' ) ) if @rss_url %>
	
	<%= work_package_table_of_contents( @work_package_past_business_items, @work_package_future_business_items, @work_package_undated_business_items ) %>
	
	<% unless @work_package_past_business_items.empty? -%>
		<div id="past">
			<%= content_tag( 'h2', 'Business items having happened' ) %>
			<ol>
				<%= render :partial => 'work_package_business_item/date', :collection => @work_package_past_business_items %>
			</ol>
		</div>
	<% end -%>
	
	<% unless @work_package_future_business_items.empty? -%>
		<div id="future">
			<%= content_tag( 'h2', 'Business items due to happen' ) %>
			<ol>
				<%= render :partial => 'work_package_business_item/date', :collection => @work_package_future_business_items %>
			</ol>
		</div>
	<% end -%>

	<% unless @work_package_undated_business_items.empty? -%>
		<div id="undated">
			<%= content_tag( 'h2', 'Business items having no date' ) %>
			<ol>
				<%= render :partial => 'work_package_business_item/business_item', :collection => @work_package_undated_business_items.first %>
			</ol>
		</div>
	<% end -%>
</div>

<%= render :partial => 'common/identifier', :object => @work_package %>